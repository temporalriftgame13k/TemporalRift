var imagesString = '|m20 10a10 10 0 0 1-10 10 10 10 0 0 1-10-10 10 10 0 0 1 10-10 10 10 0 0 1 10 10z,74#0,,25#1,,76 0 20 0 20#7,,77#8,,78#9,,79_|m0 24c0 30 48 32 48 0 1-31-48-31-48 0z,1 2 45 49 -6_l|m0 0h300v350h-300z,4 0 0 350 0_c|@,2,0,0_l.3.4|m69 257s43-7.08 81-7.08 81 7.08 81 7.08v-70h-162z,15 164 164 183 263|m98.7 236c-1.2-12.9 99-16.3 104 0.0766v38.7h-104z,80|m24 350c7-49 18-58 18-58 22-15 81-29 81-58h54c0 29 59 43 81 58 0 0 11 9 18 58z,81|m227 266c43-9.41 38-39.8 7-72.8 47-92-52-181-75-135l50 135c29 9 27.4 47.8-1.55 60.8 11.9 3.24 16.3 5.24 19.6 12.1z,14 264 264 254 48|m179 85c51 16 47 78 47 78h-80z,6 184 218 68 151|m150 43c49 6 54 60-59 150-29 9-19.3 52.8 1.55 60.8-6.98 1.19-19.2 2.28-19.6 12.1-32.8-5.66-38-40.8-7-72.8-44-95 35-156 84-150z,9 49 50 43 259|m90 152h120v28h-120z,25|m83 167s-8-17 8-24c31-13 38-15 52-38-3 24-26 36-26 36-29 3-34 26-34 26z,6 144 80 101 153|m69 177s3 15 19 13c11-24-16-25-16-25z,82|m123 224v10c9 17 45 17 54 0v-10z,82|m231 177s-3 15-19 13c-11-24 16-25 16-25z,82|@,0,107,153|@,0,173,153|m177 97c-27 43-58 58-79 52 21-5 35-13 39-28-19 28-50 14-54 43-21-8-14 13-14 13s3-12 14-8c1 27 34 68 67 68s66-41 67-68c11-4 14 8 14 8s7-21-14-13c-1e-5 -42-25-64-40-67zm-62 57s10 4 15 9c0 0-6 10-13 9-9-1-16-9-16-9v-3zm84 6v4s-7 7-16 8c-7 1-13-9-13-9 5-5 15-9 15-9z,12 118 118 97 237#3,m177 97c-27 43-58 58-79 52 21-5 35-13 39-28-19 28-50 14-54 43-21-8-14 13-14 13s3-12 14-8c1 27 34 68 67 68s66-41 67-68c11-4 14 8 14 8s7-21-14-13c-1e-5 -42-25-64-40-67zm-62 57s8.06801 6.03438 15 9c0 0-6 7.64424-13 6.64424-9-1-16-6.64424-16-6.64424v-3zm84 6v4s-7.14243 5.04756-16.1424 6.04756c-7 1-12.8576-7.04756-12.8576-7.04756 5.9372-2.63075 15-9 15-9z|m150 160-6 20 6 5z,83|m203 148c-2-9-13-17-30-16-3 1-1 5 1 6 13-2 20 4 29 10z,7#3,m201.493 142.925c-2-9-20.8276-1.15271-33.7603 2.85968-3 1-1 5 1 6 12.7764-4.30937 19.6937-11.7859 32.7603-8.85968z|m131 163c-2-6-9-14-23-12-5 1-7 5-7 10 8-6 17-7 30 2z,83#3,m131 163c-2-6-9-14-23-12-5 1-7 5-7 10 7.85689-4.20669 16.0162-4.71095 30 2z#4,m131 163c-2-6-9-11.3-23-9.28-5 1-7 2.28-7 7.28 7.82 12.1 18.8 12.3 30 2z|m139 207 8-4 3 3 3-3 8 4c-8 1-14 1-22 0z,84|m139 207s5 5 11 5 11-5 11-5h-22z,84|m98 157s0 2 3 3c16-7 26-1 29 2,,84,2.5#3,m98 157s0 2 3 3c12.6466-4.00694 22.011-0.48642 29 2#4,m98 157s0 2 3 3c4.2 15.3 25 15 29 2|m107 158c-4 0-5-3-5-3,,84,2#3,m106.873 158.794c-4 0-5.08935-2.98904-5.08935-2.98904#4,m103 164c-4 0-6.42-1.85-6.42-1.85|m169 163c2-6 9-14 23-12 5 1 7 5 7 10-8-6-17-7-30 2z,83#3,m169 163c2-6 8.65805-11.7134 23.1038-11.5279 5 1 6.8962 4.52786 6.8962 9.52786-8.15637-4.51396-17.2071-3.12975-30 2z#4,m169 163c2-6 8.85-10.9 22.9-8.91 5 1 7.15 1.91 7.15 6.91-7.36 8.8-15.1 12.6-30 2z|m202 157s0 2-3 3c-16-7-26-1-29 2,,84,2.5#3,m202 157s0 2-3 3c-16.2407-3.35062-23.4367 1.14587-29.3309 2.56985#4,m202 157s0 2-3 3c-7.31 15-21.9 13.3-29 2|m193 158c4 0 5-3 5-3,,84,2#3,m192.182 159.025c4 0 5.95606-3.20724 5.95606-3.20724#4,m197 164c4 0 5.74-0.998 5.74-0.998|m20.5 350 18.5-59.6 58.3-29.8 0.482-25.4c7.36 12.2 15.8 15.6 39.1 17-5.84 9.7-10.6 18.8-10.2 25.4l13.7 0.394c-0.964 40.3 0.112 66.1 4 72z,85|m280 350-18.5-59.6-58.3-29.8-0.482-25.4c-7.36 12.2-15.8 15.6-39.1 17 4.99 8.17 11 16.1 10.2 25.4l-13.7 0.394c0.0761 24.7 2.82 50.8-4 72z,85_c7|m104 211c-14-1-28-2-24-19-29-7-27-26-16-31-33 3-40-75 18-38z,18 60 106 179 155|m159 213-78-63c-49-61-38-162 42-93 10-25 47-26 64 12 24-14 47 7 36 29 14-5 54 5 26 51 17 10 5 39-17 44 5 10-17 20-72 20z,16|m190 118c-49-101-29 148-100-53l-38 8c-4 53 67 124 67 124z,18 86 171 96 144|m262 350c1 1-224 0-224 0 13-72 10-123 112-135 99 10 99 61 112 135z,40|m124 225h56c0 29-57 28-56 0z,86|m81 150v13c-25-6-29 27 2 22 0 0 23 46 70 46s71-47 71-47c30 11 40-22 4-21-3-37-30-64-38-45-59-71-12 111-109 32z,21 165 165 103 192|m152 158-19 19 15 1z,86|m202 164c-6 12-35 6-31-8 7-14 34-3 31 8z,25|m176 134c-4 0-3 8 1 7 17-4 27 11 29 9s-11-19-30-16z,16|m114 191v26h77v-26z,87|m135 195c-4 11 9 11 12 4-1 6 11 10 11 0 2 6 13 7 13-2l-36-2zm15 14c-2 0-4 1-5 4-2-6-12-4-12 2l36 1c1-4-8-10-13-2-1-3-4-5-6-5z,25|m113 190v28h79v-28zm38 8c12 1 39-6 38 4s-12 16-38 13-38-9-36-17 24-1 36 0z,20|m224 183 4-15c26 4 17 25-4 15z,86|m83 184c-4-10-2-15-2-15-24-0-17 20 2 15z,86|@,0,174,150|m203 161c-1-9-25-18-32-5,,77,2_c9|m26 350c4-20 16-41 26-61 15-14 32-26 53-36h90c21 9 37 21 53 36 14 22 21 41 26 61,40|m246 178c20-4 39 23 1 40-1 5-9 13-17 5zm-192 0c-20-4-39 23-1 40 1 5 9 13 17 5z,23|m253 214c19-16 6-32-9-30l2-8c36 0 23 36 7 38z,24 246 269 178 195|m120 72c-10-28 18-49 29-48 18 2 19 49 32 58z,27 136 134 21 83|m47 214c-19-16-6-32 9-30l-2-8c-36 0-23 36-7 38z,24 52 35 168 204|m59 194c-5-15-36-66 29-103 56 19 12 100-29 103z,27 75 97 120 100|m56 46 211 76,,88,3|m240 194c36-55-15-93-56-111s-74-31-74-31c-64-19-7 130 130 142z,33 291 168 218 96|m112 250h76c14 68-87 71-76 0z,23|m187 248c57 11 83 58 94 102h-110c-63-18-72-44-73-72-9-2-25 2-46 11 10-19 36-34 61-41 1 60 75 54 74 0z,38 79 242 236 360|m127 257c-70-3-100-100-24-140 41 41 86-3 99 4 82 54 19 141-29 136-12 15-30 17-46 0z,35 146 146 181 274|m137 79 22-14 66 24-18 20z,88|m138 233h24c-5 10-20 9-24 0z,89|m166 234h-32l10-9 6 5 6-5z,90|m150 201 12 6h-24l12-6z,91|m104 154c29-17 63-17 92 0v38h-92z,30 144 144 90 163|m104 166c29-17 63-18 92-2v40h-92z,32 148 145 101 173|m203 192c-2 7-8 7-16 7-14-0-17-9-15-16 11 1 25 2 31 9zm-106 0c2 7 8 7 16 7 14-0 17-9 15-16-11 1-25 2-31 9z,25|@,0,104,181|@,0,176,181|m196 186-22-3 13-12zm-92 0 22-3-13-12z,22|m129 183c-3 1-21 2-25 3s-8 9-8 9l-5-3,,89,2|m171 183c3 1 21 2 25 3s8 9 8 9l5-3,,89,2|m123 164s-10 3-21 6c-12 3-18 11-16 12s8-4 19-6c10-2 19-4 19-4 5-2 3-8-1-8zm54 0c-4 0-6 6-1 8 0 0 9 2 19 4 11 2 17 7 19 6s-4-9-16-12c-11-3-21-6-21-6z,25_c8|m117 233v-38l66-4e-4v38z,45|m87 161c34 89 117 50 131-3 25 15 39-39 7-30 24-133-170-145-146 3-34-4-8 48 8 30z,44 150 150 20 229|m149 118-17 35 14 5z,45|m145 186c6 6 31 1 34-8z,45|m223 137-5 21c23 12 31-33 5-21zm-136 24-5-20c-24-13-16 36 5 20z,45|m79 131c2-20-13-81 69-61 36-16 81-10 73 76 49-138-162-179-142-15z,46 154 154 22 91|m8 350s0-32 15-80c67-29 92-29 94-57 7 18 60 16 66-1 3 30 24 28 94 58 14 49 15 80 15 80z,40|m130 128c-0 10-16 11-29 4 3-9 25-15 29-4z,25|m171 126c1 10 16 13 28 4-7-14-26-10-28-4z,25|@,0,110,119,0.9,0.9|@,0,177,118,0.9,0.9|m171 126c10-4 19-5 28 4-4-15-28-20-28-4zm-70 6c6-5 18-9 29-4-3-20-27-6-29 4z,46 123 123 113 138|m94 122c11-24 27-16 40-12 4 1-1 10-2 9-11-8-27-5-38 3zm116-10c-7-21-22-21-39-17-5 0-2 10 2 10 9-4 19-7 37 7z,92|@,1,94,106|@,1,161,106|m101 132c8-6 16-8 29-4,,93,1.94|m199 130c-7-5-14-9-28-4,,93,1.94|m181 178-38 9c10-9 22-11 38-9z,94|m200 238-122 112h44l108-99z,41 299 60 164 396|m100 238 122 112h-44l-108-99z,41 74 243 232 395|m137 254s56-70 51-80c-5-11-51-35-51-35z,47 213 166 168 181_m.5|m0 0h1100v900h-1100z,50 261 752 -12 807#5,,97 0 0 0 900_m|m0 800v-467c583 204 501-367 1100-205v672z,52 211 270 -50 585|m0 800v-493c612 238 450-290 1100-73v566z,52 321 278 -24 766_m0|@,0,95,156,0.1,0.1|@,0,208,194,0.1,0.1|@,0,241,224,0.1,0.1|@,0,438,247,0.1,0.1|@,0,448,21,0.1,0.1|@,0,504,351,0.1,0.1|@,0,249,418,0.1,0.1|@,0,891,184,0.1,0.1|@,0,916,630,0.1,0.1|@,0,769,678,0.1,0.1|@,0,823,542,0.1,0.1|@,0,881,667,0.1,0.1|@,0,1054,829,0.1,0.1|@,0,451,493,0.1,0.1|@,0,327,342,0.1,0.1_m0|@,0,147,1,0.2,0.2|@,0,2,119,0.2,0.2|@,0,44,110,0.2,0.2|@,0,113,107,0.2,0.2|@,0,120,52,0.2,0.2|@,0,234,119,0.2,0.2|@,0,74,199,0.2,0.2|@,0,69,173,0.2,0.2|@,0,1,199,0.2,0.2|@,0,112,160,0.5,0.5_m1|@,0,0,0,12.5,12.5_m.6|m23 30-8 9-12 4v6l27 7 27-7v-6l-12-4-8-9z,98|m30 0c-6 6-5 22-5 22l-3 5 2 18-3 1 4 9-7 3 12 3 12-3-7-3 4-9-3-1 2-18-3-5s1-16-5-22z,25|m3 50v-18,,25,2|m15 54v-30,,25,2|m45 54v-30,,25,2|m57 50v-18,,25,2|m37 62s0 6-7 6c-7 0-7-6-7-6z,53,,2|m30 65v93,,54 30 30 65 158,3#6,,,99 30 30 65 158_|m0 0h56v22h-56,100,,,0.5_|m0 0v53h19c0-43 68-43 68 0h19v-53z,57 0 0 0 53|m106 0h-106,,101,3_m0,5|@,8,0,0|m250 376c-47 10-207 210-207 210l1054-3-226-200-165 111s-254-233-276-237-113 101-180 119z,60 126 126 230 512|m554 518h-114l-24-24v-320l24-24h114,,40,7|m510 56.7 80 54v318h-80z,61 516 541 113 327|m0 900v-438l507 447 593-369v360z,60 129 129 292 679|m366 750v-114l24-24h320l24 24v114,,40,7|m610 279-120 54v120h120z,61 224 224 248 386|m462 351 176 89v210h-176z,61 222 222 357 658|m638 440-176-89,,101,3|m610 279-120 54,,101,3|m510 56.7 80 54,,101,3|@,0,672,-54,16,16|@,15,497,648|@,15,602,648|@,15,392,648|m0 700h1100v1300h-1100z,102|@,14,462,500|@,14,582,500|@,14,462,535|@,14,582,535|@,14,462,570|@,14,582,570|@,14,462,465|@,14,582,465|@,10,115,87,0.2,0.2_m|m0 0c165-0 369 50 550 50s369-50 550-50 369 56 550 50v90h-1650z,64 0 0 -103 140_|m9 75c37 24.1 48 18 77-22l-65-33z,103|m86 53-49 15-10-25 30-42c18 11 27 29 29 52z,104|m35 33-32 7s6-23 19-33c14-6 25-6 35-6z,105|m9 75 26-42c-34-3-41 5-26 42z,106|m35 33c-2 11-4 23 2 35 0 0-8-10-10-22z,43_|m30 90 20-40 20 40z,107_|m30 50 20-40 20 40z,108_|m0 50h100,,109,12_|m0 50h100,,109,12|m50-1.5e-6v100,,109,12_|m50 0v50h50,,109,12_|m26 10h48c8.86 0 16 7.14 16 16v48c0 8.86-7.14 16-16 16h-48c-8.86 0-16-7.14-16-16v-48c0-8.86 7.14-16 16-16z,110|@,18,6,4|@,19,0,0,1.1,1.1|@,20,0,0,1.1,1.1|@,21,0,0,1.1,1.1|@,22,0,0,1.1,1.1|@,23,0,0,1.1,1.1|@,0,10,10,4,4_m1|m15 0h790c8.31 0 15 6.69 15 15v490c0 8.31-6.69 15-15 15h-790c-8.31 0-15-6.69-15-15v-490c0-8.31 6.69-15 15-15z,67 -40 793 -27 528|@,24,1,1_m|m500 80v350h100v-350z,111,,7|m500 85v350h100v-350z,112,,7|m200 204v100h50v50h50v-100h-50v-50z,113|m200 199v100h50v50h50v-100h-50v-50z,114|m390 240v40l40-20z,25|m500 435h100,,25,1|m500 85h100,,25,1|m500 135h100,,25,1|m550 85v350,,25,1|m500 185h100,,25,1|m500 235h100,,25,1|m500 285h100,,25,1|m500 335h100,,25,1|m500 385h100,,25,1|m400 260h-30,,25,5_m|m69 421c-92-92-92-240 0-332l166 166z,69 0 164 255 255|m89 69c92-92 240-92 332 0l-166 166z,71 255 255 0 174|m441 421c92-92 92-240 0-332l-166 166z,73 337 510 255 255';

var defsString = 'def|?0,0,0.6?0,1,0|89f|e9f|?2,0,0.4?3,1,0.1|524|?5,0,?5,1,0|937|724|?7,0,?8,1,|baf|bbf|?10,0,?11,1,|726|?8,0,?13,1,|?5,0,?8,1,|397|278|?16,0,?17,1,|8cf|9df|?19,0,?20,1,|cbe|87c|?22,0,?23,1,|fff|ddf|?25,0,?26,1,|437|98c|?28,0,0.5?29,1,0|549|?31,0,0.5?29,1,0|?26,0,?25,1,|a9e|?22,0,?34,1,|929|38e|?36,0,0.6?37,1,0|738|225|?39,0,?40,1,|bcf|aaf|?42,0,?43,1,|78e|?42,0,?45,1,|?45,0,?45,1,0|219|007|?48,0,?49,1,|92c|?51,0,0.1?51,1,0|7ff|?53,0,?53,1,0|236|348|?55,0,?56,1,|06c|0cb|?58,0,?59,1,0|?56,0,?55,1,|408|12f|?62,0,?63,1,0|239|229|?65,0,?66,1,|53b|?68,0,0.8?68,1,0|37d|?70,0,0.8?70,1,0|2ba|?72,0,0?72,1,0.8|936|43f|?53,0,?75,1,|27b|389|426|113|337|98f|87e|538|224|7be|659|ba5|548|75b|88c|559|77b|67d|04b|9ff|?95,0,?96,0.8,|ddd|?53,0,0?53,1,0|38c|f77|4bf|55c|88f|99f|66d|f37|3fb|6ef|34b|34d|56e|872|ff2';

var steps = [
  "2|Incoming transmission.",
  "1|Admiral Shuttleworth to rogue vessel!||0||5",
  "1|Deactivate your engines and surrender yourself immediately!",
  "0|Does that ever work?|0",
  "1|You are in violation of several...",
  "0|Computer, end transmission.|1|||-1",
  "0|It's only 13 thousand kilometers to the Yorke system... can I outrun them for that long?|0",
  "2|It takes one fuel cell to move four thousand kilometers. Georgia has three fuel cells left and still needs to travel thirteen thousand kilometers to Yorke. Does she need to stop and refuel?|||-1",
  "0|I need more fuel. But the path to the nearest station runs through an asteroid field. I could clear a path with the ship's cannon, but I only have two shots remaining.|0||2",
  "2|Create a path from the green arrow to the red arrow by clicking two asteroids to shoot with the cannon. You can only move vertically or horizontally.|||-1",
  "0|I've cleared a path! The station is on the planet ahead.|0||2",
  "0|This place looks abandoned...|1||2",
  "1|Hello!|0||2|3",
  "0|...",
  "1|I'm Otis, and this is \"Otis' Hyper-Charged, Overloaded, Value-Packed, Interstellar Star Ship Refueling Station\"! Whatever you need, we got it.",
  "0|Thank you Otis, I just need some fuel cells.",
  "1|Oh, I'm sorry we're out of those.",
  "0|You're out? But you said this was a refueling station.|1",
  "1|It is!",
  "1|Well... it was. But my no-good brother went and broke the plasma pipes.|2",
  "1|Hey, maybe you can help. If you can repair the plasma pipes I'll give you the cells at a special, discounted price.",
  "0|I guess I have no other choice.|0",
  "2|Rotate the pipes below by clicking them to create an unbroken line from the red to the green arrow.|||-1|-1",
  "0|Done!|0||2",
  "1|I knew you could do it! As I promised, I'll give you a whole 2% discount!|1|||3",
  "0|Thanks...",
  "1|Where are you headed anyway? I don't get many customers here who aren't hauling freight.|0",
  "0|The Temporal Rift.",
  "1|Why!?",
  "0|I will use it to travel to the past, and save one of my crew members.|2",
  "1|That time travel stuff is just religious superstition! Besides, no ship can withstand the forces within the rift!",
  "0|Except this one. I'm sorry I need to hurry. Will you help me load these fuel cells?|0",
  "2|How many fuel cells (yellow shape on left) can Georgia fit onto her ship's cargo (shape on right)?|||-1|-1",
  "1|All done!|0|0|2|3",
  "0|Thanks for your help, goodbye.",
  "1|Good luck!",
  "0|I need to find the precise coordinates for the Temporal Rift. I only have this sky chart.|0||2|-1",
  "2|Planet Wheatley is two spaces below an asteroid. The Temporal Rift is three spaces to the left of Planet Wheatley. Click the empty tile that could contain the rift.|||-1|-1",
  "0|Coordinates locked in.|1||2",
  "2|Incoming transmission.|0",
  "1|Blessed greetings to you. Welcome to the Shrine of Yorke. I am High Priestess Ada.|0|0|2|4",
  "0|Blessings upon you, too. I've come to pray before the Temporal Rift.",
  "1|A noble endeavor, but the rift is off limits to the public.",
  "0|Please, I'm a pilgrim all the way from the Etta region. Don't turn me away after I've come so far.",
  "1|...",
  "1|Perhaps a test of wisdom is in order. Answer my question with clarity and I will allow you passage.",
  "2|I visit all, both the rich and the poor; those who see through me feel sadness no more. What am I?|||-1|-1",
  "1|You may proceed, seeker.|0|0|2|4",
  "0|This is it...|2|||-1",
  "2|Incoming transmission.|||-1|-1",
  "1|Admiral Shuttleworth to Commander Georgia Key. Stop.|2|0|2|5",
  "0|You're too late Shuttleworth.|0",
  "1|Is this what she would have wanted? For you to throw your life away like this?",
  "0|This ships hull...",
  "1|Has never been tested under such pressure. It won't work, you'll be crushed.",
  "0|Either way, justice will be served.|2",
  "1|It wasn't your fault. End this Georgia, turn around.|1",
  "2|Should Georgia turn around or enter the rift?|||-1|-1",
  "0|You're right, Admiral. This won't solve anything.|0|0|2|5",
  "2|Georgia decided not to enter the rift, which is good because I really had nothing else planned.|||-1|-1",
  "2|After serving two years for grand theft star ship, she went on to become ambassador to the people of planet Zimbaflox.",
  "2|Thanks for playing!"
];

// Sprite Indexes
var sCounter = 0;
var spriteBg = sCounter++;
var spriteBg1 = sCounter++;
var spriteGeorgia = sCounter++;
var spriteOtis = sCounter++;
var spriteAda = sCounter++;
var spriteShuttleworth = sCounter++;
var spriteSky = sCounter++;
var spriteNebula = sCounter++;
var spriteStars = sCounter++;
var spriteStars_1 = sCounter++;
var spriteCluster = sCounter++;
var spriteCluster_1 = sCounter++;
var spritePlanet1 = sCounter++;
var spriteShip = sCounter++;
var spriteStation = sCounter++;
var spriteWave = sCounter++;
var spriteWave_1 = sCounter++;
var spritePuzzle = sCounter++;
var spriteCells = sCounter++;
var spriteOptions = sCounter++;
